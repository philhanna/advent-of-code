from pathlib import Path





# Get this directory
this_file = Path(__file__).absolute()
day5 = Path(this_file).parent

# Get the input file path
input_file = Path(day5).joinpath("input.txt")

# Get the test data file file path
testdata = Path(day5).joinpath("testdata.json")

# Convert input to testdata
with open(input_file) as fp:
    
    with open(testdata, "w") as out:
        pass


# Load the stacks and moves from the test data file
with open(testdata) as fp:
    data = json.load(fp)

# Load the stacks
stacks = Stacks(data["stacks"])
stacks.show_state("Initial state:")

# Apply the moves
for i, move in enumerate(data["moves"]):
    stacks.apply_move(i, move)
    stacks.show_state(
        f"After {i} moves: move {move[0]} from stack {move[1]} to stack {move[2]}:")

stacks.show_state("Final state:")

# Display the elf label
elf_label = ""
for i in range(1, 10):
    stack = stacks.stacks[i]
    top_item = stack.pop()
    elf_label += top_item

print(elf_label)
